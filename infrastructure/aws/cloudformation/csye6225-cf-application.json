{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Parameters": {
		"imgID": {
			"Description" : "ImageId",
			"Type" : "String"
		},
		"instanceType": {
			"Description" : "InstanceType",
			"Type" : "String"
		},
		"volumeType": {
			"Description" : "volumeType",
			"Type" : "String"		
		},
		"volumeSize": {
			"Description" : "volumeSize",
			"Type" : "Number"		
		},
		"securityGroupId": {
			"Description" : "securityGroupId",
			"Type" : "String"		
		},
		"subnetId": {
			"Description" : "subnetId",
			"Type" : "String"		
		},
		"DynamoDBTableName": {
			"Description" : "DynamoDBTableName",
			"Type" : "String"
		},
		"S3BucketName": {
			"Description" : "S3BucketName",
			"Type" : "String"
		},
		"DBEngine": {
			"Description" : "DBEngine",
			"Type" : "String"
		},
		"DBEngineVersion": {
			"Description" : "EngineVersion",
			"Type" : "String"
		},
		"DBInstanceClass": {
			"Description" : "DBInstanceClass",
			"Type" : "String"
		},
		"DBInstanceIdentifier": {
			"Description" : "DBInstanceIdentifier",
			"Type" : "String"
		},
		"DBUser": {
			"Description" : "DBUser",
			"Type" : "String"
		},
		"DBPassword": {
			"Description" : "DBPassword",
			"Type" : "String"
		},
		"DBName": {
			"Description" : "DBName",
			"Type" : "String"
		},
		"DBSubnetGroup": {
			"Type" : "String"
		}
	}, 
	"Resources": {
		"MyEC2Instance" : {
         		"Type" : "AWS::EC2::Instance",
        		 "Properties" : {
				 "InstanceType" : {"Ref" : "instanceType"},
				 "ImageId" : {"Ref" : "imgID"},
				 "DisableApiTermination" : "false",
           			 "BlockDeviceMappings" : [{
                  			"DeviceName" : "/dev/sda1",
                  			"Ebs" : {
                     				"VolumeType" : {"Ref" : "volumeType"},
                     				"DeleteOnTermination" : "false",
                     				"VolumeSize" : {"Ref" : "volumeSize"}
                  			}
               			}],
				"SubnetId" : {"Ref" : "subnetId"},
				"SecurityGroupIds" : [{"Ref" : "securityGroupId"}]
			}
     	 	},
		"myDynamoDBTable" : {
		      "Type" : "AWS::DynamoDB::Table",
		      "Properties" : {
		   		"AttributeDefinitions" : [
			  		{
					    	"AttributeName" : "id",
					    	"AttributeType" : "S"   
			  		}
				],
				"KeySchema" : [
		  			{
						"AttributeName" : "id",
						"KeyType" : "HASH"
		  			}
				],
				"ProvisionedThroughput" : {
					"ReadCapacityUnits" : "5",
					"WriteCapacityUnits" : "5"
				},
				"TableName" : {"Ref" : "DynamoDBTableName"}
		      }
	    	},
		"myS3Bucket" : {
  			"Type" : "AWS::S3::Bucket",
  			"Properties" : {
				"AccessControl" : "PublicRead",
				"BucketName" : {"Ref" : "S3BucketName"}
			}
		},
		"myRDSDBInstance" : {
   			"Type" : "AWS::RDS::DBInstance",
   			"Properties" : {
				"AllocatedStorage" : "5",
				"Engine" : {"Ref" : "DBEngine"},
				"EngineVersion" : {"Ref" : "DBEngineVersion"},
				"DBInstanceClass" : {"Ref" : "DBInstanceClass"},
				"MultiAZ" : "false",
				"DBInstanceIdentifier" : {"Ref" : "DBInstanceIdentifier"},
				"MasterUsername" : {"Ref" : "DBUser"},
			        "MasterUserPassword" : {"Ref" : "DBPassword"},
			        "DBSubnetGroupName" : {"Ref" : "DBSubnetGroup"},
				"PubliclyAccessible": "false",
			        "DBName" : { "Ref" : "DBName" }
      			}
   		}
	}
}
